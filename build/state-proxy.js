!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.StateProxy=t():e.StateProxy=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function r(e,t){var n={};return"undefined"==typeof t.getState&&(n.state=e.getDefaultState(),t.getState=function(){return n.state}),"undefined"==typeof t.setState&&(t.setState=function(e){n.state=e}),e}function a(e,t,n){var a={schemaNode:e,getState:t,setState:n},i=o(a);return r(i,a)}var o=n(2);e.exports={create:a,SchemaTypes:n(3)}},function(e,t){function n(e,t){e.getState=function(e,n){var r=t.getState(),a=Object.assign({},r);return"undefined"!=typeof n&&Object.assign(a,n,{val:r.val}),"undefined"!=typeof e&&"undefined"==typeof t.schemaNode.val&&Object.assign(a,{val:e}),a},e.getDefaultState=function(){return{val:t.schemaNode["default"]}},e.val=function(n){if("undefined"!=typeof t.schemaNode.val)return"undefined"!=typeof n&&console.log("WARNING: Setting operation for calculated property is not allowed"),t.schemaNode.val(t.getState);if("undefined"==typeof n)return t.getState().val;var r=e.getState(n);r.isNotVirgin=!0,t.setState(r)},e.ignored=function(){var e=t.schemaNode.ignored;if("undefined"==typeof e)return!1;if("boolean"==typeof e)return e;if("function"==typeof e)return e(t.getState);throw new Error('"ignored" definition is invalid')},e.required=function(){var n=t.schemaNode.required;if("undefined"==typeof n||e.ignored())return!1;if("boolean"==typeof n)return n;if("function"==typeof n)return n(t.getState);throw new Error('"required" definition is invalid')},e.validate=function(n){var r={isValid:!0,validationMessage:""},a=e.val(),o=e.getState(),i="undefined"==typeof a||null===a||""===a;if((o.isNotVirgin||n)&&i&&e.required())r.isValid=!1,r.validationMessage="Required field";else{var u=t.schemaNode.validate;if("function"==typeof u){var f=u(t.getState);"boolean"==typeof f?r.isValid=f:r=f}}return r},e.exposeRequiredErrors=function(){var n=e.getState(void 0,{isNotVirgin:!0});t.setState(n)}}e.exports=n},function(e,t,n){function r(e){var t=n(4),r=Object.create(null);if(!t.hasOwnProperty(e.schemaNode.type))throw new Error("ERROR: StateProxy encountered unrecognized schema type: "+e.schemaNode.type);var a=t[e.schemaNode.type];return r=a(e),r.schema=e.schemaNode,r}e.exports=r},function(e,t){e.exports={dynamic:void 0,bool:"bool",number:"number",string:"string",object:"object",list:"list"}},function(e,t,n){var r=n(3),a={};a[r.dynamic]=n(8),a[r.bool]=n(7),a[r.number]=n(9),a[r.string]=n(10),a[r.object]=n(6),a[r.list]=n(5),e.exports=a},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function a(e,t){var n=Object.create(null),a=e.schemaNode.idPropertyName||"id",o=t[a].val;return n.schemaNode=e.schemaNode.listItem,n.getState=function(){var t=e.getState();return r(t.val,function(e){return e.val[a].val==o})},n.getState.getParentState=e.getState,n.setState=function(t){var n=e.getState(),r=n.val.map(function(e){return e.val[a].val===o?t:e});return n.val=r,e.setState(n)},i(n)}function o(e){var t=Object.create(null);return t.getItems=function(t,n){var r=e.getState(),o=r.val.map(function(t){return a(e,t.val)});return o},t.getDefaultState=function(){return{val:[]}},t.val=function(e){return"undefined"==typeof e?t.getItems().map(function(e){return e.val()}):void 0},t.addItem=function(t){var n=e.getState(),r=a(e,t),o=r.getState(t);n.val.push(o),e.setState(n)},t.validate=function(){},t}var i=n(2);e.exports=o},function(e,t,n){function r(e,t){var n=Object.create(null);return n.schemaNode=t.schemaNode.properties[e],n.getState=function(){var n=t.getState()||{val:{}};return n.val[e]},n.getState.getParentState=t.getState,n.setState=function(n){var r=t.getState();return r.val[e]=n,t.setState(r)},n}function a(e,t){for(var n=Object.create(null),a=0;a<e.length;a++){var o=e[a],u=r(o,t);n[o]=i(u)}return n}function o(e){var t=Object.create(null),n=[];return e.schemaNode.properties&&(n=Object.keys(e.schemaNode.properties)),t.properties=a(n,e),t.getDefaultState=function(){for(var e={val:Object.create(null)},r=0;r<n.length;r++){var a=n[r];e.val[a]=t.properties[a].getDefaultState()}return e},t.getState=function(r,a){var o=e.getState()||{val:{}},i=Object.assign({},o);if("undefined"!=typeof r||"undefined"!=typeof a){Object.assign(i,a,{val:o.val});for(var u=Object.create(null),f=0;f<n.length;f++){var c=n[f],l="undefined"!=typeof r?r[c]:void 0;u[c]=t.properties[c].getState(l,a)}Object.assign(i,{val:u})}return i},t.val=function(r){if("undefined"!=typeof e.schemaNode.val)return"undefined"!=typeof r&&console.log("WARNING: Setting operation for calculated property is not allowed"),e.schemaNode.val(e.getState);if("undefined"==typeof r){for(var a=Object.create(null),o=0;o<n.length;o++){var i=n[o];a[i]=t.properties[i].val()}return a}var u=t.getState(r);u.isNotVirgin=!0,e.setState(u)},t.validate=function(e){for(var r={isValid:!0,validationMessage:""},a=0;a<n.length;a++){var o=n[a],i=t.properties[o].validate(e).isValid;if(!i){r.isValid=!1;break}}return r},t.exposeRequiredErrors=function(){var n=t.getState(void 0,{isNotVirgin:!0});e.setState(n)},t}var i=n(2);e.exports=o},function(e,t,n){function r(e){var t=Object.create(null);return a(t,e),t}var a=n(1);e.exports=r},function(e,t,n){function r(e){var t=Object.create(null);return a(t,e),t}var a=n(1);e.exports=r},function(e,t,n){function r(e){var t=Object.create(null);return a(t,e),t}var a=n(1);e.exports=r},function(e,t,n){function r(e){var t=Object.create(null);return a(t,e),t}var a=n(1);e.exports=r}])});