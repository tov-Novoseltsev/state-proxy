!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.StateProxy=e():t.StateProxy=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),r=t[e[0]];return function(t,e,a){r.apply(this,[t,e,a].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){function r(t,e){var n={};return"undefined"==typeof e.getState&&(n.state=t.getDefaultState(),e.getState=function(){return n.state}),"undefined"==typeof e.setState&&(e.setState=function(t){n.state=t}),t}function a(t,e,n){var a={schemaNode:t,getState:e,setState:n},o=i.create(a);return o.getData=function(){return i.deconstructState(t,e)},o.setData=function(r){n(i.constructState(t,e(),r))},r(o,a)}function o(t,e){var n={isValid:t,validationMessage:""};return t||(n.validationMessage=e),n}var i=n(2);t.exports={create:a,formValidationResult:o,SchemaTypes:n(4)}},function(t,e,n){function r(t){return{val:t["default"]}}function a(t,e,n,a){var o=e||r(t),i=u({},o);if("undefined"!=typeof a&&u(i,a,{val:o.val}),"undefined"!=typeof n){var f=n;"function"==typeof t.setDataTransform&&(f=t.setDataTransform(n)),u(i,{val:f})}return i}function o(t,e){var n;return n="undefined"==typeof t.val?e().val:"function"==typeof t.val?t.val(e):t.val,"function"==typeof t.getDataTransform&&(n=t.getDataTransform(n)),n}function i(t){var e=Object.create(null);return e.getDefaultState=r.bind(null,t.schemaNode),e.getState=function(e,n){var r=t.getState();return a(t.schemaNode,r,e,n)},e.val=function(n){if("undefined"==typeof n)return"undefined"!=typeof t.schemaNode.val?t.schemaNode.val(t.getState):t.getState().val;var r=e.getState(n);r.hasChanges=!0,t.setState(r)},e.ignored=function(){var e=t.schemaNode.ignored;if("undefined"==typeof e)return!1;if("boolean"==typeof e)return e;if("function"==typeof e)return e(t.getState);throw new Error('"ignored" definition is invalid')},e.required=function(){var n=t.schemaNode.required;if("undefined"==typeof n||e.ignored())return!1;if("boolean"==typeof n)return n;if("function"==typeof n)return n(t.getState);throw new Error('"required" definition is invalid')},e.validate=function(n){var r={isValid:!0,validationMessage:""},a=e.getState(),o=a.hasChanges||n;if(!o||e.ignored())return r;var i=e.val(),u="undefined"==typeof i||null===i||""===i||i.constructor===Array&&!i.length;if(u&&e.required())r.isValid=!1,r.validationMessage="Required field";else{var f=t.schemaNode.validate;if("function"==typeof f){var c=f(t.getState);"boolean"==typeof c?r.isValid=c:r=c}}return r},e.exposeRequiredErrors=function(){var n=e.getState(void 0,{hasChanges:!0});t.setState(n)},e.resetToDefault=function(){var n=e.getDefaultState();t.setState(n)},e}var u=n(3);t.exports={getDefaultState:r,constructState:a,deconstructState:o,create:i}},function(t,e,n){function r(t){var e=n(5);if(e.hasOwnProperty(t.type)){var r=e[t.type];return r}throw new Error("ERROR: StateProxy encountered unrecognized schema type: "+t.type)}function a(t){var e=r(t.schemaNode),n=e.create(t);return n.schema=t.schemaNode,n}function o(t){var e=r(t);return e.getDefaultState(t)}function i(t,e,n,a){var o=r(t);return o.constructState(t,e,n,a)}function u(t,e){var n=r(t);return n.deconstructState(t,e)}t.exports={create:a,getDefaultState:o,constructState:i,deconstructState:u}},function(t,e){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==r.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(t){a[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(o){return!1}}var a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=r()?Object.assign:function(t,e){for(var r,u,f=n(t),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var s in r)o.call(r,s)&&(f[s]=r[s]);if(a){u=a(r);for(var l=0;l<u.length;l++)i.call(r,u[l])&&(f[u[l]]=r[u[l]])}}return f}},function(t,e){t.exports={dynamic:void 0,bool:"bool",number:"number",string:"string",object:"object",list:"list"}},function(t,e,n){var r=n(4),a={};a[r.dynamic]=n(1),a[r.bool]=n(8),a[r.number]=n(9),a[r.string]=n(10),a[r.object]=n(7),a[r.list]=n(6),t.exports=a},function(t,e,n){function r(t){return{val:t["default"]||[]}}function a(t,e,n,a){var o=f({},e||r(t));if("undefined"!=typeof n){var i=n;"function"==typeof t.setDataTransform&&(i=t.setDataTransform(n));var u=i.map(function(e){return c.constructState(t.listItem,void 0,e,a)});f(o,{val:u})}else if("undefined"!=typeof a){var s=o.val.map(function(e){return c.constructState(t.listItem,e,void 0,a)});f(o,a,{val:s})}return o}function o(t,e){var n=e().val.map(function(n){var r=function(){return n};return r.getParentState=e,c.deconstructState(t.listItem,r)});return"function"==typeof t.getDataTransform&&(n=t.getDataTransform(n)),n}function i(t,e,n){var r=Object.create(null);return r.schemaNode=t.schemaNode.listItem,r.getState=function(){var e=t.getState();return e.val[n]},r.getState.getParentState=t.getState,r.setState=function(e){var r=t.getState();return r.val[n]=e,t.setState(r)},c.create(r)}function u(t){var e=Object.create(null);return e.getItems=function(e,n){var r=t.getState(),a=r.val.map(function(e,n){return i(t,e,n)});return a},e.getDefaultState=r.bind(null,t.schemaNode),e.getState=function(e,n){var r=t.getState();return a(t.schemaNode,r,e,n)},e.val=function(n){if("undefined"==typeof n){var r=e.getState().val;return r.map(function(t){return t.val})}var a=n.map(function(e){var n=null;return c.constructState(t.schemaNode.listItem,n,e)});t.setState({val:a})},e.ignored=function(){var e=t.schemaNode.ignored;if("undefined"==typeof e)return!1;if("boolean"==typeof e)return e;if("function"==typeof e)return e(t.getState);throw new Error('"ignored" definition is invalid')},e.required=function(){var n=t.schemaNode.required;if("undefined"==typeof n||e.ignored())return!1;if("boolean"==typeof n)return n;if("function"==typeof n)return n(t.getState);throw new Error('"required" definition is invalid')},e.validate=function(t){var n={isValid:!0,validationMessage:""},r=e.val(),a="undefined"==typeof r||null===r||!r.length;if(a&&e.required())n.isValid=!1,n.validationMessage="Required field";else for(var o=e.getItems(),i=0;i<o.length;i++){var u=o[i].validate(t);if(!u.isValid){n.invalidPropertyIndex=i,n.invalidPropertyResult=u,n.isValid=!1;break}}return n},e}var f=n(3),c=n(2);t.exports={getDefaultState:r,constructState:a,deconstructState:o,create:u}},function(t,e,n){function r(t,e){var n=[];t&&(n=Object.keys(t));for(var r=0;r<n.length&&e(n[r],r)!==!0;r++);}function a(t){var e={val:Object.create(null)};return r(t.properties,function(n){var r=t.properties[n];e.val[n]=l.getDefaultState(r)}),e}function o(t,e,n,o){var i=e||a(t),u=s({},i);if("undefined"!=typeof n||"undefined"!=typeof o){var f=n;"function"==typeof t.setDataTransform&&"undefined"!=typeof n&&(f=t.setDataTransform(n)),s(u,o,{val:i.val});var c=Object.create(null);r(t.properties,function(e){var n="undefined"!=typeof f?f[e]:void 0,r=t.properties[e],a=i.val[e];c[e]=l.constructState(r,a,n,o)}),s(u,{val:c})}return u}function i(t,e){var n=Object.create(null);return r(t.properties,function(r){var a=t.properties[r],o=function(){return e().val[r]};o.getParentState=e,n[r]=l.deconstructState(a,o)}),"function"==typeof t.getDataTransform&&(n=t.getDataTransform(n)),n}function u(t,e){var n=Object.create(null);return n.schemaNode=e.schemaNode.properties[t],n.getState=function(){var n=e.getState()||{val:{}};return n.val[t]},n.getState.getParentState=e.getState,n.setState=function(n){var r=e.getState();return r.val[t]=n,e.setState(r)},n}function f(t){var e=Object.create(null);return r(t.schemaNode.properties,function(n){var r=u(n,t);e[n]=l.create(r)}),e}function c(t){var e=Object.create(null);return e.properties=f(t),e.getDefaultState=a.bind(null,t.schemaNode),e.getState=function(e,n){var r=t.getState();return o(t.schemaNode,r,e,n)},e.val=function(n){if("undefined"!=typeof t.schemaNode.val)return"undefined"!=typeof n&&console.log("WARNING: Setting operation for calculated property is not allowed"),t.schemaNode.val(t.getState);if("undefined"==typeof n){var a=Object.create(null);return r(t.schemaNode.properties,function(t){a[t]=e.properties[t].val()}),a}var o=e.getState(n);o.hasChanges=!0,t.setState(o)},e.validate=function(n){var a={isValid:!0,validationMessage:""};return r(t.schemaNode.properties,function(t){var r=e.properties[t].validate(n);if(!r.isValid)return a.invalidPropertyName=t,a.invalidPropertyResult=r,a.isValid=!1,!0}),a},e.exposeRequiredErrors=function(){var n=e.getState(void 0,{hasChanges:!0});t.setState(n)},e.resetToDefault=function(){var n=e.getDefaultState();t.setState(n)},e}var s=n(3),l=n(2);t.exports={getDefaultState:a,constructState:o,deconstructState:i,create:c}},function(t,e,n){var r=n(1);t.exports=r},8,8]))});